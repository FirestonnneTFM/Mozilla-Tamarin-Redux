/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/. */

/*
    Note:  The three bindings supplied (get,set,method) are valid and the
    default slot binding is not valid for callstatic.
*/

.script_info {
	init: .function_id(main)
	traits: {
		.trait { 
			kind: Trait_Getter 
			method: .function_id(staticGetter) 
			name:staticGetterBinding
			disp_id:0
		}

		.trait { 
			kind: Trait_Setter 
			method: .function_id(staticSetter) 
			name:staticSetterBinding
			disp_id:0
		}

		.trait { 
			kind: Trait_Method 
			method: .function_id(staticMethod) 
			name:staticMethodBinding
			disp_id:0
		}
	}
}
function main()
{
	getlocal0
    pushscope
    findproperty START 
    pushstring "CallStatic" 
    callpropvoid START 1

	getlocal0
	callstatic .function_id(staticMethod) 0
	pop

	getlocal0
	callstatic .function_id(staticGetter) 0
	pop

	getlocal0
	callstatic .function_id(staticSetter) 0
	pop

	findproperty END
    callpropvoid END 0
    returnvoid
}

function staticGetter()
{
	getlocal0
	pushscope

	findproperty PASS
	pushstring "get binding"
	callpropvoid PASS 1
	
	returnvoid
}

function staticSetter()
{
	getlocal0
	pushscope

	findproperty PASS
	pushstring "set binding"
	callpropvoid PASS 1
	
	returnvoid
}

function staticMethod()
{
	getlocal0
	pushscope

	findproperty PASS
	pushstring "method binding"
	callpropvoid PASS 1
	
	returnvoid
}